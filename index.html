<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Player</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div id="audio-spectrum"></div>

    <input type="button" id="btn-play" value="Play" disabled="disabled" />
    <input type="button" id="btn-pause" value="Pause" disabled="disabled" />
    <input type="button" id="btn-stop" value="Stop" disabled="disabled" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.3.7/wavesurfer.min.js"></script>
    <script>
      var buttons = {
        play: document.getElementById('btn-play'),
        pause: document.getElementById('btn-pause'),
        stop: document.getElementById('btn-stop'),
      };

      var Spectrum = WaveSurfer.create({
        container: '#audio-spectrum',
        progressColor: '#03a9f4',
      });

      buttons.play.addEventListener(
        'click',
        function () {
          Spectrum.play();

          buttons.stop.disabled = false;
          buttons.pause.disabled = false;
          buttons.play.disabled = true;
        },
        false
      );

      buttons.pause.addEventListener(
        'click',
        function () {
          Spectrum.pause();

          buttons.stop.disabled = false;
          buttons.pause.disabled = true;
          buttons.play.disabled = false;
        },
        false
      );

      buttons.stop.addEventListener(
        'click',
        function () {
          Spectrum.stop();

          buttons.stop.disabled = true;
          buttons.pause.disabled = false;
          buttons.play.disabled = false;
        },
        false
      );

      Spectrum.on('ready', function () {
        buttons.play.disabled = false;
      });

      window.addEventListener(
        'resize',
        function () {
          var currentProgress =
            Spectrum.getCurrentTime() / Spectrum.getDuration();

          Spectrum.empty();
          Spectrum.drawBuffer();
          Spectrum.seekTo(currentProgress);

          buttons.stop.disabled = false;
          buttons.pause.disabled = true;
          buttons.play.disabled = false;
        },
        false
      );

      Spectrum.load('Chris.mp3');
    </script>
  </body>
</html>
